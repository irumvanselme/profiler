import Error from "next/error";
import { PageLayout } from "../../components/layouts/page";
import { connectToDatabase } from "../../utils/mongodb";

import { Text } from "../../components/ui/text";
import { Button } from "../../components/ui/button";

function Profile({ user }) {
    if (user == null) return <Error statusCode={404} title="User Not Found" />;

    return (
        <>
            <PageLayout>
                <div className="relative">
                    <div className="text-right pr-5 pb-1">
                        status: Looking for a job
                    </div>
                    <div
                        className="bg-gray-300 min-h-[250px] rounded-[40px] p-5 flex justify-center items-center bg-center bg-cover"
                        style={{
                            backgroundImage: "url('" + user.cover_pic + "')",
                        }}
                    />
                    <div className={"-mt-[150px] flex justify-center lg:justify-start"}>
                        <div
                            className="w-[250px] h-[250px] bg-gray-300 rounded-[125px] border-[15px] border-white flex justify-center items-center bg-center bg-cover"
                            style={{
                                backgroundImage: "url('" + user.profile_pic + "')",
                            }}
                        />
                    </div>
                    <div className="lg:ml-[260px] lg:-mt-[80px] py-5">
                        <div className="flex flex-col md:flex-row justify-between">
                            <div>
                                <h1 className="pb-5">
                                    <Text variant={1} color="black">
                                        {user.full_names}
                                    </Text>
                                </h1>
                                <h2 className="pb-5">
                                    <Text variant={2} color="gray">
                                        {user.title}
                                    </Text>
                                </h2>
                                <p className="max-w-[500px]">
                                    <Text>{user.bio}</Text>
                                </p>
                            </div>
                            <div className="flex flex-col items-start md:items-end pt-16 md:pt-0 pr-5">
                                <div className="flex flex-row-reverse md:flex-row pb-4">
                                    <div className="pl-3 md:pr-3">{user.email}</div>
                                    <div>
                                        <svg
                                            width="24"
                                            height="24"
                                            viewBox="0 0 24 24"
                                            fill="none"
                                            xmlns="http://www.w3.org/2000/svg"
                                        >
                                            <path
                                                d="M3 3H21C21.2652 3 21.5196 3.10536 21.7071 3.29289C21.8946 3.48043 22 3.73478 22 4V20C22 20.2652 21.8946 20.5196 21.7071 20.7071C21.5196 20.8946 21.2652 21 21 21H3C2.73478 21 2.48043 20.8946 2.29289 20.7071C2.10536 20.5196 2 20.2652 2 20V4C2 3.73478 2.10536 3.48043 2.29289 3.29289C2.48043 3.10536 2.73478 3 3 3ZM20 7.238L12.072 14.338L4 7.216V19H20V7.238ZM4.511 5L12.061 11.662L19.502 5H4.511Z"
                                                fill="#646464"
                                            />
                                        </svg>
                                    </div>
                                </div>

                                <div className="flex flex-row-reverse md:flex-row pb-4">
                                    <div className="pl-3 md:pr-3">
                                        {user.phone_number}
                                    </div>
                                    <div>
                                        <svg
                                            width="24"
                                            height="24"
                                            viewBox="0 0 24 24"
                                            fill="none"
                                            xmlns="http://www.w3.org/2000/svg"
                                        >
                                            <path
                                                d="M9.366 10.682C10.3043 12.3305 11.6695 13.6957 13.318 14.634L14.202 13.396C14.3442 13.1969 14.5543 13.0569 14.7928 13.0023C15.0313 12.9478 15.2814 12.9825 15.496 13.1C16.9103 13.8729 18.4722 14.3378 20.079 14.464C20.3298 14.4839 20.5638 14.5975 20.7345 14.7823C20.9052 14.9671 21 15.2094 21 15.461V19.923C21.0001 20.1706 20.9083 20.4094 20.7424 20.5932C20.5765 20.777 20.3483 20.8927 20.102 20.918C19.572 20.973 19.038 21 18.5 21C9.94 21 3 14.06 3 5.5C3 4.962 3.027 4.428 3.082 3.898C3.10725 3.6517 3.22298 3.42352 3.40679 3.25763C3.5906 3.09175 3.82941 2.99995 4.077 3H8.539C8.79056 2.99997 9.0329 3.09475 9.21768 3.26545C9.40247 3.43615 9.51613 3.67022 9.536 3.921C9.66222 5.52779 10.1271 7.08968 10.9 8.504C11.0175 8.71856 11.0522 8.96874 10.9977 9.2072C10.9431 9.44565 10.8031 9.65584 10.604 9.798L9.366 10.682ZM6.844 10.025L8.744 8.668C8.20478 7.50409 7.83535 6.26884 7.647 5H5.01C5.004 5.166 5.001 5.333 5.001 5.5C5 12.956 11.044 19 18.5 19C18.667 19 18.834 18.997 19 18.99V16.353C17.7312 16.1646 16.4959 15.7952 15.332 15.256L13.975 17.156C13.4287 16.9437 12.898 16.6931 12.387 16.406L12.329 16.373C10.3676 15.2567 8.74328 13.6324 7.627 11.671L7.594 11.613C7.30691 11.102 7.05628 10.5713 6.844 10.025Z"
                                                fill="#646464"
                                            />
                                        </svg>
                                    </div>
                                </div>

                                <div className="flex flex-row-reverse md:flex-row pb-4">
                                    <div className="pl-3 md:pr-3">{user.address}</div>
                                    <div>
                                        <svg
                                            width="20"
                                            height="20"
                                            viewBox="0 0 20 20"
                                            fill="none"
                                            xmlns="http://www.w3.org/2000/svg"
                                        >
                                            <path
                                                d="M10 17.4167L14.125 13.2917C14.9408 12.4758 15.4963 11.4364 15.7213 10.3049C15.9463 9.17336 15.8308 8.0005 15.3892 6.93463C14.9477 5.86876 14.2 4.95776 13.2408 4.31681C12.2815 3.67586 11.1537 3.33376 10 3.33376C8.8463 3.33376 7.71851 3.67586 6.75924 4.31681C5.79997 4.95776 5.05229 5.86876 4.61076 6.93463C4.16923 8.0005 4.05368 9.17336 4.27871 10.3049C4.50374 11.4364 5.05926 12.4758 5.875 13.2917L10 17.4167ZM10 19.7733L4.69667 14.47C3.64779 13.4211 2.93349 12.0847 2.64411 10.6299C2.35473 9.17502 2.50326 7.66703 3.07092 6.29659C3.63858 4.92615 4.59987 3.75481 5.83324 2.9307C7.0666 2.1066 8.51665 1.66673 10 1.66673C11.4834 1.66673 12.9334 2.1066 14.1668 2.9307C15.4001 3.75481 16.3614 4.92615 16.9291 6.29659C17.4968 7.66703 17.6453 9.17502 17.3559 10.6299C17.0665 12.0847 16.3522 13.4211 15.3033 14.47L10 19.7733ZM10 10.8333C10.442 10.8333 10.866 10.6577 11.1785 10.3452C11.4911 10.0326 11.6667 9.6087 11.6667 9.16667C11.6667 8.72464 11.4911 8.30072 11.1785 7.98816C10.866 7.6756 10.442 7.5 10 7.5C9.55798 7.5 9.13405 7.6756 8.82149 7.98816C8.50893 8.30072 8.33334 8.72464 8.33334 9.16667C8.33334 9.6087 8.50893 10.0326 8.82149 10.3452C9.13405 10.6577 9.55798 10.8333 10 10.8333ZM10 12.5C9.11595 12.5 8.2681 12.1488 7.64298 11.5237C7.01786 10.8986 6.66667 10.0507 6.66667 9.16667C6.66667 8.28261 7.01786 7.43477 7.64298 6.80964C8.2681 6.18452 9.11595 5.83333 10 5.83333C10.8841 5.83333 11.7319 6.18452 12.357 6.80964C12.9821 7.43477 13.3333 8.28261 13.3333 9.16667C13.3333 10.0507 12.9821 10.8986 12.357 11.5237C11.7319 12.1488 10.8841 12.5 10 12.5Z"
                                                fill="#646464"
                                            />
                                        </svg>
                                    </div>
                                </div>

                                <div className="flex flex-row-reverse md:flex-row pb-4">
                                    <div className="pl-3 md:pr-3">
                                        {user.website_name}
                                    </div>
                                    <div>
                                        <svg
                                            width="20"
                                            height="20"
                                            viewBox="0 0 20 20"
                                            fill="none"
                                            xmlns="http://www.w3.org/2000/svg"
                                        >
                                            <path
                                                d="M14.7141 12.3567L13.5357 11.1783L14.7141 10C15.0236 9.69046 15.2691 9.32299 15.4367 8.91856C15.6042 8.51413 15.6904 8.08067 15.6904 7.64292C15.6904 7.20517 15.6042 6.7717 15.4367 6.36727C15.2691 5.96284 15.0236 5.59537 14.7141 5.28583C14.4045 4.9763 14.037 4.73076 13.6326 4.56324C13.2282 4.39572 12.7947 4.3095 12.357 4.3095C11.9192 4.3095 11.4858 4.39572 11.0813 4.56324C10.6769 4.73076 10.3094 4.9763 9.99989 5.28583L8.82156 6.46417L7.64322 5.28583L8.82156 4.1075C9.76182 3.18243 11.0295 2.66638 12.3485 2.67175C13.6676 2.67712 14.931 3.20348 15.8637 4.13618C16.7964 5.06887 17.3228 6.33233 17.3281 7.65135C17.3335 8.97037 16.8175 10.2381 15.8924 11.1783L14.7141 12.3567ZM12.3566 14.7142L11.1782 15.8925C10.7153 16.363 10.1638 16.7372 9.55561 16.9935C8.94737 17.2498 8.2944 17.3831 7.63437 17.3858C6.97434 17.3885 6.32031 17.2605 5.71001 17.0092C5.0997 16.7578 4.5452 16.3881 4.07848 15.9214C3.61176 15.4547 3.24207 14.9002 2.99073 14.2899C2.73939 13.6796 2.61137 13.0255 2.61406 12.3655C2.61674 11.7055 2.75008 11.0525 3.00639 10.4443C3.26269 9.83604 3.63689 9.28457 4.10739 8.82167L5.28572 7.64333L6.46406 8.82167L5.28572 10C4.97619 10.3095 4.73065 10.677 4.56313 11.0814C4.39561 11.4859 4.30939 11.9193 4.30939 12.3571C4.30939 12.7948 4.39561 13.2283 4.56313 13.6327C4.73065 14.0372 4.97619 14.4046 5.28572 14.7142C5.59526 15.0237 5.96273 15.2692 6.36716 15.4368C6.77159 15.6043 7.20506 15.6905 7.64281 15.6905C8.08056 15.6905 8.51402 15.6043 8.91845 15.4368C9.32288 15.2692 9.69035 15.0237 9.99989 14.7142L11.1782 13.5358L12.3566 14.7142ZM12.3566 6.46417L13.5357 7.64333L7.64322 13.535L6.46406 12.3567L12.3566 6.465V6.46417Z"
                                                fill="#646464"
                                            />
                                        </svg>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div className="mt-10">
                            <Text variant={3} color="black">
                                Proffession: {user.proffession}
                            </Text>
                        </div>
                        <section className="__section">
                            <Text capitalize>Social media links</Text>
                            <div className="grid grid-cols-1 xs:grid-cols-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 3xl:grid-cols-5 4xl:grid-cols-6 gap-8 mt-8">

                                <div className="bg-gray-200 rounded-lg text-center p-4 flex items-center">
                                    <div>
                                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24"
                                            height="24">
                                            <path fill="none" d="M0 0h24v24H0z" />
                                            <path
                                                d="M15.3 5.55a2.9 2.9 0 0 0-2.9 2.847l-.028 1.575a.6.6 0 0 1-.68.583l-1.561-.212c-2.054-.28-4.022-1.226-5.91-2.799-.598 3.31.57 5.603 3.383 7.372l1.747 1.098a.6.6 0 0 1 .034.993L7.793 18.17c.947.059 1.846.017 2.592-.131 4.718-.942 7.855-4.492 7.855-10.348 0-.478-1.012-2.141-2.94-2.141zm-4.9 2.81a4.9 4.9 0 0 1 8.385-3.355c.711-.005 1.316.175 2.669-.645-.335 1.64-.5 2.352-1.214 3.331 0 7.642-4.697 11.358-9.463 12.309-3.268.652-8.02-.419-9.382-1.841.694-.054 3.514-.357 5.144-1.55C5.16 15.7-.329 12.47 3.278 3.786c1.693 1.977 3.41 3.323 5.15 4.037 1.158.475 1.442.465 1.973.538z" />
                                        </svg>
                                    </div>
                                    <div className="pl-3">
                                        {user.twitter_username}
                                    </div>
                                </div>

                                <div className="bg-gray-200 rounded-lg text-center p-4 flex items-center">
                                    <div>
                                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24"
                                            height="24">
                                            <path fill="none" d="M0 0h24v24H0z" />
                                            <path
                                                d="M6.94 5a2 2 0 1 1-4-.002 2 2 0 0 1 4 .002zM7 8.48H3V21h4V8.48zm6.32 0H9.34V21h3.94v-6.57c0-3.66 4.77-4 4.77 0V21H22v-7.93c0-6.17-7.06-5.94-8.72-2.91l.04-1.68z" />
                                        </svg>
                                    </div>
                                    <div className="pl-3">
                                        {user.linkedin_username}
                                    </div>
                                </div>

                                <div className="bg-gray-200 rounded-lg text-center p-4 flex items-center">
                                    <div>
                                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24"
                                            height="24">
                                            <path fill="none" d="M0 0h24v24H0z" />
                                            <path
                                                d="M12 9a3 3 0 1 0 0 6 3 3 0 0 0 0-6zm0-2a5 5 0 1 1 0 10 5 5 0 0 1 0-10zm6.5-.25a1.25 1.25 0 0 1-2.5 0 1.25 1.25 0 0 1 2.5 0zM12 4c-2.474 0-2.878.007-4.029.058-.784.037-1.31.142-1.798.332-.434.168-.747.369-1.08.703a2.89 2.89 0 0 0-.704 1.08c-.19.49-.295 1.015-.331 1.798C4.006 9.075 4 9.461 4 12c0 2.474.007 2.878.058 4.029.037.783.142 1.31.331 1.797.17.435.37.748.702 1.08.337.336.65.537 1.08.703.494.191 1.02.297 1.8.333C9.075 19.994 9.461 20 12 20c2.474 0 2.878-.007 4.029-.058.782-.037 1.309-.142 1.797-.331.433-.169.748-.37 1.08-.702.337-.337.538-.65.704-1.08.19-.493.296-1.02.332-1.8.052-1.104.058-1.49.058-4.029 0-2.474-.007-2.878-.058-4.029-.037-.782-.142-1.31-.332-1.798a2.911 2.911 0 0 0-.703-1.08 2.884 2.884 0 0 0-1.08-.704c-.49-.19-1.016-.295-1.798-.331C14.925 4.006 14.539 4 12 4zm0-2c2.717 0 3.056.01 4.122.06 1.065.05 1.79.217 2.428.465.66.254 1.216.598 1.772 1.153a4.908 4.908 0 0 1 1.153 1.772c.247.637.415 1.363.465 2.428.047 1.066.06 1.405.06 4.122 0 2.717-.01 3.056-.06 4.122-.05 1.065-.218 1.79-.465 2.428a4.883 4.883 0 0 1-1.153 1.772 4.915 4.915 0 0 1-1.772 1.153c-.637.247-1.363.415-2.428.465-1.066.047-1.405.06-4.122.06-2.717 0-3.056-.01-4.122-.06-1.065-.05-1.79-.218-2.428-.465a4.89 4.89 0 0 1-1.772-1.153 4.904 4.904 0 0 1-1.153-1.772c-.248-.637-.415-1.363-.465-2.428C2.013 15.056 2 14.717 2 12c0-2.717.01-3.056.06-4.122.05-1.066.217-1.79.465-2.428a4.88 4.88 0 0 1 1.153-1.772A4.897 4.897 0 0 1 5.45 2.525c.638-.248 1.362-.415 2.428-.465C8.944 2.013 9.283 2 12 2z" />
                                        </svg>
                                    </div>
                                    <div className="pl-3">
                                        {user.instagram_username}
                                    </div>
                                </div>

                                <div className="bg-gray-200 rounded-lg text-center p-4 flex items-center">
                                    <div>
                                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24"
                                            height="24">
                                            <path fill="none" d="M0 0h24v24H0z" />
                                            <path
                                                d="M5.883 18.653c-.3-.2-.558-.455-.86-.816a50.32 50.32 0 0 1-.466-.579c-.463-.575-.755-.84-1.057-.949a1 1 0 0 1 .676-1.883c.752.27 1.261.735 1.947 1.588-.094-.117.34.427.433.539.19.227.33.365.44.438.204.137.587.196 1.15.14.023-.382.094-.753.202-1.095C5.38 15.31 3.7 13.396 3.7 9.64c0-1.24.37-2.356 1.058-3.292-.218-.894-.185-1.975.302-3.192a1 1 0 0 1 .63-.582c.081-.024.127-.035.208-.047.803-.123 1.937.17 3.415 1.096A11.731 11.731 0 0 1 12 3.315c.912 0 1.818.104 2.684.308 1.477-.933 2.613-1.226 3.422-1.096.085.013.157.03.218.05a1 1 0 0 1 .616.58c.487 1.216.52 2.297.302 3.19.691.936 1.058 2.045 1.058 3.293 0 3.757-1.674 5.665-4.642 6.392.125.415.19.879.19 1.38a300.492 300.492 0 0 1-.012 2.716 1 1 0 0 1-.019 1.958c-1.139.228-1.983-.532-1.983-1.525l.002-.446.005-.705c.005-.708.007-1.338.007-1.998 0-.697-.183-1.152-.425-1.36-.661-.57-.326-1.655.54-1.752 2.967-.333 4.337-1.482 4.337-4.66 0-.955-.312-1.744-.913-2.404a1 1 0 0 1-.19-1.045c.166-.414.237-.957.096-1.614l-.01.003c-.491.139-1.11.44-1.858.949a1 1 0 0 1-.833.135A9.626 9.626 0 0 0 12 5.315c-.89 0-1.772.119-2.592.35a1 1 0 0 1-.83-.134c-.752-.507-1.374-.807-1.868-.947-.144.653-.073 1.194.092 1.607a1 1 0 0 1-.189 1.045C6.016 7.89 5.7 8.694 5.7 9.64c0 3.172 1.371 4.328 4.322 4.66.865.097 1.201 1.177.544 1.748-.192.168-.429.732-.429 1.364v3.15c0 .986-.835 1.725-1.96 1.528a1 1 0 0 1-.04-1.962v-.99c-.91.061-1.662-.088-2.254-.485z" />
                                        </svg>
                                    </div>
                                    <div className="pl-3">
                                        {user.github_username}
                                    </div>
                                </div>

                                <div className="bg-gray-200 rounded-lg text-center p-4 flex items-center">
                                    <div>
                                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24"
                                            height="24">
                                            <path fill="none" d="M0 0h24v24H0z" />
                                            <path
                                                d="M14 19h5V5H5v14h7v-5h-2v-2h2v-1.654c0-1.337.14-1.822.4-2.311A2.726 2.726 0 0 1 13.536 6.9c.382-.205.857-.328 1.687-.381.329-.021.755.005 1.278.08v1.9H16c-.917 0-1.296.043-1.522.164a.727.727 0 0 0-.314.314c-.12.226-.164.45-.164 1.368V12h2.5l-.5 2h-2v5zM4 3h16a1 1 0 0 1 1 1v16a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1z" />
                                        </svg>
                                    </div>
                                    <div className="pl-3">
                                        {user.facebook_username}
                                    </div>
                                </div>
                            </div>
                        </section>
                        <section className="__section">
                            <div className="flex justify-between items-center">
                                <Text capitalize>Services</Text>
                                <div>
                                    <Button>CONTACT</Button>
                                </div>
                            </div>
                            <div className="grid gap-8 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-3 2xl:grid-cols-4 4xl:grid-cols-5 mt-8">
                                {user.services.map((service, i) => (
                                    <div key={i} className="bg-gray-200 rounded-lg p-4">
                                        <h1 className="pb-3">
                                            <Text color="black" variant={2}>
                                                {service.name}
                                            </Text>
                                        </h1>
                                        <p>
                                            <Text>{service.description}</Text>
                                        </p>
                                    </div>
                                ))}
                            </div>
                        </section>
                        {/* <section className="__section">
							<Text capitalize>Reviews</Text>
						</section> */}
                    </div>
                </div>
            </PageLayout>
        </>
    );
}

export const getServerSideProps = async ({ params }) => {
    const { db } = await connectToDatabase();

    const user = await db
        .collection("users")
        .findOne({ username: params.username });

    return {
        props: {
            user: JSON.parse(JSON.stringify(user)),
        },
    };
};

export default Profile;
